# 機能要件

## 1. 分析結果データ取得機能

- 既存の3C・4P・PEST分析テーブルの内容を参照し、必要な情報をまとめて取得
- 各レコードを一括で取り出し、AIが扱いやすい形式(JSON等)に変換

## 2. 多段推論（Chain of Thought）エンジン

### 推論ステップ

1. **統合準備ステップ**
   - 3C/4P/PESTから抽出した要点をLLMが要約し、カテゴリ分け

2. **関連性分析ステップ**
   - 各分析フレームワークの項目を深掘り・相互参照
   - 潜在的な課題や機会を抽出

3. **コンセプト候補生成ステップ**
   - 分析をベースに、商品コンセプト候補を複数案生成

4. **最終絞り込みステップ**
   - 生成された複数案を比較
   - ユーザーが望む条件を踏まえた最終候補を提案

## 3. ユーザーインタラクションと編集機能

- 多段推論の各ステップで得られた結果を画面表示
- ユーザーによる修正や追記機能
- 中間結果へのコメント追加と再学習リクエスト機能

## 4. 商品コンセプト編集・確定機能

編集可能な要素：
- タイトル
- ターゲット層
- 提供価値（Value Proposition）
- 競合優位性

機能：
- コンセプト確定時のデータベース保存
- 再呼び出し・編集機能

## 5. レポート出力機能

- 統合分析プロセスの時系列ドキュメント化
- PDF/Webページ出力
- 既存の分析結果レポートとのリンク

## 6. 権限管理・認証

- ログイン済みユーザーのみがアクセス可能
- 自身の分析結果またはチーム内共有の分析結果のみ利用可能

## 7. APIエラー・例外ハンドリング

- OpenAI APIのタイムアウト・エラー処理
- リトライ機能
- エラーメッセージ表示
- 入力不足時の再入力フロー
