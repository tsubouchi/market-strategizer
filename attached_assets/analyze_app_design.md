要件書

1. プロジェクト概要
	•	システム名称
3C・4P・PEST分析サポートWEBアプリ (仮)
	•	背景・目的
	•	企業や個人が行うマーケティング分析を効率化し、誰でも簡単にビジネス戦略の検討ができるようにする。
	•	3C分析、4P分析、PEST分析をGUI上で実行し、その結果をレポートとして整理・管理できる仕組みを提供する。
	•	AI駆動型開発を学ぶ教材・ワークショップの一環として、実務レベルのアプリ開発手法を体験する。
	•	開発・学習の狙い
	1.	OpenAIのLLMを活用したシンプルなAgent機能の組み込み
	2.	GitHubを利用したバージョン管理とCI/CDパイプラインの構築
	3.	Supabaseによるバックエンド（データベースおよび認証機能）との連携
	4.	Vercel等を利用したフロントエンドのデプロイと運用
	5.	カーソル（Cursor）などのAIアシストツールを活用した開発効率化

2. スコープ
	•	対象範囲
	•	分析機能の提供（3C、4P、PESTのテンプレート・入力フォーム・結果表示）
	•	ユーザー管理（サインアップ、ログイン、ログアウト）
	•	分析結果の保存・閲覧・編集・削除(CRUD)
	•	分析レポートの出力（PDFまたはWebページ）
	•	除外範囲
	•	有償課金機能やサブスクリプション管理
	•	詳細なBIツールレベルの集計機能
	•	多言語化（今回は日本語を主とする）

3. システム要件

3.1. 機能要件
	1.	ユーザー認証・管理機能
	•	ユーザーのサインアップ、ログイン、ログアウトができる。
	•	Supabase Authなどを利用してセキュアに認証を行う。
	•	ユーザーごとに分析結果が紐づけられる（他人の分析データは見られない）。
	2.	3C分析機能
	•	3C分析(Company・Customer・Competitor)の項目をフォームで入力できる。
	•	入力データを元に、簡易レポート（構造化された文章、箇条書きなど）を生成して表示する。
	•	AIによるサポート：OpenAIのLLMを呼び出し、入力項目を要約または補足説明可能。
	3.	4P分析機能
	•	4P分析(Product・Price・Place・Promotion)の項目をフォームで入力。
	•	入力後、内容の要約・提案をAIが行う。
	•	分析結果を保存して、後日編集や再分析ができるようにする。
	4.	PEST分析機能
	•	PEST(Politics・Economics・Society・Technology)の分析項目をフォームで入力。
	•	入力情報をAIが自動要約または提案を行う。
	•	分析結果をレポート形式で保存・閲覧。
	5.	レポート管理機能
	•	3C・4P・PESTそれぞれの分析結果を一覧表示できる。
	•	任意の分析結果をクリックすると詳細表示・編集が可能。
	•	分析結果をPDFやWeb用にエクスポートできる（オプション）。
	6.	データ保存・CRUD機能
	•	Supabaseのデータベースに接続し、分析データやユーザー情報を保存。
	•	作成した分析データの閲覧、更新、削除が行える。
	7.	AIアシスト機能（エージェント）
	•	OpenAI APIを利用し、ユーザーの入力内容や既存の分析結果に対して補足提案や改善策を提示する。
	•	質問応答機能：ユーザーがテキストチャットで質問すると、AIが回答する。
	8.	UIモック作成・デザイン
	•	v0 などのツールを使ったUIモック作成。
	•	実装時はReact(またはNext.js)などのフロントエンドフレームワークを想定。
	•	スマートフォン・タブレットでも最低限操作できるレスポンシブデザイン。

3.2. 非機能要件
	1.	パフォーマンス要件
	•	同時接続数は小規模（ワークショップ想定）を前提としつつ、最低限同時に10ユーザー程度の分析操作が問題なく動作する。
	2.	拡張性
	•	分析テンプレートの項目追加や新たな分析手法の追加が比較的容易に行える。
	3.	セキュリティ要件
	•	ユーザー認証・アクセス制御を確実に行い、他ユーザーのデータが閲覧・編集されないようにする。
	•	ネットワーク通信はHTTPSを利用。
	4.	操作性・UI/UX
	•	シンプルで直感的に操作可能なインターフェース。
	•	テキスト入力欄やフォームのラベルなどはユーザーが理解しやすい文言を心がける。
	5.	可用性
	•	ワークショップでの使用中に極力ダウンタイムが発生しないよう配慮。
	6.	メンテナンス性
	•	GitHubリポジトリでソースコードを一元管理し、PRやIssue管理を活用する。
	•	cursorrulesなどのツールでコードクオリティチェックを行う。	

4. システム構成
	•	フロントエンド
	•	フレームワーク: React または Next.js
	•	デプロイ: Vercel
	•	開発補助ツール: Cursor（プロンプト設計、Composer機能など）
	•	バックエンド・データベース
	•	Supabase
	•	認証機能 (Supabase Auth)
	•	データベース (PostgreSQL)
	•	テーブル例:
	•	users (ユーザー情報)
	•	analyses (分析レコード: id, user_id, type(3C/4P/PEST), content, created_at, updated_at etc.)
	•	AI連携
	•	OpenAI API (LLM, ChatGPT等のモデル利用)
	•	APIキーは環境変数として管理し、GitHubにはコミットしない。
	•	CI/CD
	•	GitHub Actions で自動テスト、ビルド、デプロイを実行。
	•	CLI連携
	•	GitHubのAPIを使い、ローカルからCLI操作でプッシュ・Issue管理が可能。

5. 画面一覧（UI例）
	1.	ログイン画面
	•	ユーザーがメールアドレスとパスワードを入力しログイン
	•	新規登録へのリンクあり
	2.	ユーザー登録画面
	•	必要最低限の情報（メール、パスワード）を入力して登録
	•	登録後、ログイン画面へ遷移
	3.	ダッシュボード
	•	ユーザーが作成した分析(3C/4P/PEST)の一覧をカード表示
	•	新規分析作成ボタン
	4.	分析作成画面
	•	3C/4P/PEST を選択し、各項目(Company, Customer, Competitorなど)を入力するフォーム
	•	AI要約ボタン（入力途中の内容をリアルタイムに要約または提案）
	5.	分析詳細画面
	•	入力内容の詳細表示と編集フォーム
	•	AIサポート: 「改善点」「より深い分析」の提案
	•	削除ボタン、戻るボタン
	6.	レポート表示画面
	•	生成された分析結果を見やすいレイアウトで表示
	•	PDFエクスポートや印刷機能（オプション）	

6. データモデル（例）

以下はSupabase上のテーブル定義例です。実際のプロジェクトに合わせて調整してください。	

-- ユーザーテーブル (SupabaseのAuthで自動生成されるユーザーIDを使用)
CREATE TABLE IF NOT EXISTS users (
  id uuid PRIMARY KEY,
  email varchar NOT NULL,
  created_at timestamp with time zone DEFAULT now()
);

-- 分析テーブル
CREATE TABLE IF NOT EXISTS analyses (
  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id uuid REFERENCES users (id) ON DELETE CASCADE,
  analysis_type varchar NOT NULL,       -- '3C', '4P', 'PEST'
  content jsonb NOT NULL,              -- 分析内容をJSONで保持
  created_at timestamp with time zone DEFAULT now(),
  updated_at timestamp with time zone DEFAULT now()
);

	•	analysis_type: 分析種別(3C/4P/PEST)
	•	content: 分析フォームの入力データをJSON形式で保管（会社名、顧客情報、価格戦略など）

7. ユーザーストーリー
	1.	新規ユーザーとして、アカウントを作成し、分析を始めたい。
	2.	既存ユーザーとして、ログイン後に前回の分析データを確認し、続きを編集したい。
	3.	ユーザーとして、3C分析の各項目を記入した後、AIによる要約や提案を参考にしたい。
	4.	ユーザーとして、4P分析を完了してレポートをPDFで出力し、同僚と共有したい。
	5.	ユーザーとして、PEST分析結果を保存して後日編集できるようにしたい。

8. テスト計画
	•	テスト種類
	1.	単体テスト (Jest)
	•	各コンポーネント／ユーティリティ関数のテスト
	2.	結合テスト (React Testing Libraryなど)
	•	フロントエンド画面からバックエンド（Supabase）へのCRUD動作確認
	3.	E2Eテスト (オプション)
	•	実際のブラウザ操作でシナリオテストを行う（Playwright や Cypress など）
	4.	CI/CDテスト
	•	GitHub Actions上で自動実行、ビルド・デプロイが問題なく行えるか確認
	•	主なテストケース
	•	ログイン／ログアウトができるか
	•	ユーザー登録後に分析一覧が空で表示されるか
	•	3C/4P/PEST それぞれのフォーム入力～保存～閲覧～編集～削除が正常に行えるか
	•	AI要約機能がAPIエラー時にリトライやエラーメッセージを表示するか	

9. 運用・保守
	•	運用体制
	•	ワークショップ期間中は開発者が管理者として運用。
	•	障害発生時にはGitHub Issueで報告・追跡。
	•	ログ・監視
	•	SupabaseコンソールおよびVercelダッシュボードでログを確認。
	•	エラー発生時にはSlackなどに通知される仕組みを導入（オプション）。		
バージョン	日付	変更内容	作成者
0.1	2025-01-19	初版作成	○○
1.0	2025-01-19	全体構成・機能要件を確定	○○
